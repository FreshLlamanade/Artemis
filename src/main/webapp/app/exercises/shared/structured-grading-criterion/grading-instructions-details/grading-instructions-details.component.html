<div *ngIf="!exercise.gradingInstructionFeedbackUsed">
<jhi-markdown-editor
    #markdownEditor
    style="height: 350px"
    class="markdown-editor"
    [markdown]="questionEditorText"
    [showPreviewButton]="true"
    [domainCommands]="domainCommands"
    (markdownChange)="prepareForSave()"
    (textWithDomainCommandsFound)="domainCommandsFound($event)"
>
    <!-- Preview -->
    <ng-container #preview>
        <div class="pt-1 background-editor-high markdown-preview">
            <div *ngFor="let criterion of exercise.gradingCriteria">
                <label class="font-weight-bold" [innerHTML]="criterion!.title! | htmlForMarkdown"></label>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <td class="font-weight-bold">Credits</td>
                            <td class="font-weight-bold" jhiTranslate="artemisApp.exercise.gradingScale">Grading Scale</td>
                            <td class="font-weight-bold" jhiTranslate="artemisApp.exercise.instrDescription">Instruction Description</td>
                            <td class="font-weight-bold">Feedback</td>
                            <td class="font-weight-bold" jhiTranslate="artemisApp.exercise.usageCount">Max Count in Score</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let instruction of criterion.structuredGradingInstructions">
                            <td style="width: 5%" [innerHTML]="instruction.credits"></td>
                            <td style="width: 10%" [innerHTML]="instruction!.gradingScale! | htmlForMarkdown"></td>
                            <td style="width: 40%" [innerHTML]="instruction!.instructionDescription! | htmlForMarkdown"></td>
                            <td style="width: 35%" [innerHTML]="instruction!.feedback! | htmlForMarkdown"></td>
                            <td style="width: 10%" [innerHTML]="instruction.usageCount"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </ng-container>
    <!-- End of Preview-->
</jhi-markdown-editor>
</div>

<div class="edit-sqi" *ngIf="exercise.gradingInstructionFeedbackUsed">
<div class="grading-instructions-update-border">
    <div *ngFor="let criteria of exercise.gradingCriteria">
        <div class="criteria-content" style="padding-bottom: 12px">
            <div class="row">
                <input class="form-control" [(ngModel)]="criteria!.title!" placeholder="Criteria Title" style="height: 33px; width: 65%" />
            </div>
        <div *ngFor="let instruction of criteria.structuredGradingInstructions">
            <div class="instructions" *ngIf="instruction.id!">
                <jhi-markdown-editor
                    #markdownEditor
                    [markdown]="generateInstructionText(instruction)"
                    [editorMode]="editorMode"
                    [metaCommands]="[]"
                    [defaultCommands]="[]"
                    [headerCommands]="[]"
                    [colorCommands]="[]"
                    [showEditButton]="false"
                    [showPreviewButton]="false"
                    [domainCommands]="[]"
                    (markdownChange)="onAnswerOptionChange($event, instruction, criteria)"
                    class="editor"
                    style="width: 65%"
                ></jhi-markdown-editor>
                <div class="form-group text-center" style="width: 25%">
                    <span class="re-evaluate-button" (click)="resetInstruction(instruction, criteria)">
                        <fa-icon [icon]="'undo'" size="2x"></fa-icon>
                    </span>
                    <span class="re-evaluate-button" (click)="deleteInstruction(instruction, criteria)">
                        <fa-icon [icon]="'trash'" size="2x"></fa-icon>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
