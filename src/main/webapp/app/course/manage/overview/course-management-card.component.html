<div class="card">
    <div class="card-heading text-white" [ngStyle]="{ backgroundColor: course.color || ARTEMIS_DEFAULT_COLOR }">
        <div [routerLink]="['/course-management', course.id]">
            <jhi-secured-image *ngIf="course.courseIcon" [cachingStrategy]="CachingStrategy.LOCAL_STORAGE" [src]="course.courseIcon"></jhi-secured-image>
            <span *ngIf="course.startDate && course.endDate">{{ course.startDate }} - {{ course.endDate }}</span>
            <span><span jhiTranslate="artemisApp.course.startDate">Start Date</span>: {{ course.startDate }}</span>
            <span><span jhiTranslate="artemisApp.course.endDate">End Date</span>: {{ course.endDate }}</span>
        </div>

        <div class="container container-padding" [routerLink]="['/course-management', course.id]">
            <h5 class="card-title text-center">{{ course.title }} ({{ course.shortName }})</h5>
            <div class="card-description text-center">{{ course.description }}</div>
        </div>

        <div *ngIf="course.isAtLeastInstructor" class="float-right">
            <div *ngIf="course.numberOfStudents !== undefined">
                <a [routerLink]="['/course-management', course.id, 'groups', 'students']" *ngIf="course.numberOfStudents === 1">
                    {{ course.numberOfStudents }} <span class="bold">{{ 'artemisApp.course.student' | translate }}</span>
                </a>
                <a [routerLink]="['/course-management', course.id, 'groups', 'students']" *ngIf="course.numberOfStudents !== 1">
                    {{ course.numberOfStudents }} <span class="bold">{{ 'artemisApp.course.students' | translate }}</span>
                </a>
            </div>
            <a [routerLink]="['/course-management', course.id, 'groups', 'students']" *ngIf="course.numberOfStudents === undefined">
                <span class="bold">{{ 'artemisApp.course.students' | translate }}</span>
            </a>

            <div *ngIf="course.numberOfTeachingAssistants !== undefined">
                <a [routerLink]="['/course-management', course.id, 'groups', 'tutors']" *ngIf="course.numberOfTeachingAssistants === 1">
                    {{ course.numberOfTeachingAssistants }} <span class="bold">{{ 'artemisApp.course.tutor' | translate }}</span>
                </a>
                <a [routerLink]="['/course-management', course.id, 'groups', 'tutors']" *ngIf="course.numberOfTeachingAssistants !== 1">
                    {{ course.numberOfTeachingAssistants }} <span class="bold">{{ 'artemisApp.course.tutors' | translate }}</span>
                </a>
            </div>
            <a [routerLink]="['/course-management', course.id, 'groups', 'tutors']" *ngIf="course.numberOfTeachingAssistants === undefined">
                <span class="bold">{{ 'artemisApp.course.tutors' | translate }}</span>
            </a>

            <div *ngIf="course.numberOfInstructors !== undefined">
                <a [routerLink]="['/course-management', course.id, 'groups', 'instructors']" *ngIf="course.numberOfInstructors === 1">
                    {{ course.numberOfInstructors }} <span class="bold">{{ 'artemisApp.course.instructor' | translate }}:</span>
                </a>
                <a [routerLink]="['/course-management', course.id, 'groups', 'instructors']" *ngIf="course.numberOfInstructors !== 1">
                    {{ course.numberOfInstructors }} <span class="bold">{{ 'artemisApp.course.instructors' | translate }}:</span>
                </a>
            </div>
            <a [routerLink]="['/course-management', course.id, 'groups', 'instructors']" *ngIf="course.numberOfInstructors === undefined">
                <span class="bold">{{ 'artemisApp.course.instructors' | translate }}</span>
            </a>
        </div>
    </div>

    <div class="container flex-container">
        <div class="row">
            <div class="col-md-8 section-card">
                <div class="section-content" *ngIf="courseDetails">
                    <div *ngIf="futureExercises?.length > 0">
                        <div class="control-label" (click)="showFutureExercises = !showFutureExercises">
                            <fa-icon class="control-icon" [icon]="showFutureExercises ? 'angle-down' : 'angle-up'"></fa-icon>
                            <strong>{{ 'artemisApp.course.releasedSoon' | translate }}</strong>
                        </div>
                        <div *ngIf="showFutureExercises">
                            <jhi-course-management-exercise-row
                                *ngFor="let exercise of futureExercises"
                                [course]="course"
                                [rowType]="exerciseRowType.FUTURE"
                                [details]="exercise"
                                [statistic]="statisticsPerExercise[exercise.exerciseId]"
                            ></jhi-course-management-exercise-row>
                        </div>
                        <div *ngIf="!showFutureExercises" class="collapsed"></div>
                    </div>
                    <div *ngIf="currentExercises?.length > 0">
                        <div class="control-label" (click)="showCurrentExercises = !showCurrentExercises">
                            <fa-icon class="control-icon" [icon]="showCurrentExercises ? 'angle-down' : 'angle-up'"></fa-icon>
                            <strong>{{ 'artemisApp.course.currentWorking' | translate }}</strong>
                        </div>
                        <div *ngIf="showCurrentExercises">
                            <jhi-course-management-exercise-row
                                *ngFor="let exercise of currentExercises"
                                [course]="course"
                                [rowType]="exerciseRowType.CURRENT"
                                [details]="exercise"
                                [statistic]="statisticsPerExercise[exercise.exerciseId]"
                            ></jhi-course-management-exercise-row>
                        </div>
                        <div *ngIf="!showCurrentExercises" class="collapsed"></div>
                    </div>
                    <div *ngIf="exercisesInAssessment?.length > 0">
                        <div class="control-label" (click)="showExercisesInAssessment = !showExercisesInAssessment">
                            <fa-icon class="control-icon" [icon]="showExercisesInAssessment ? 'angle-down' : 'angle-up'"></fa-icon>
                            <strong>{{ 'artemisApp.course.inAssessment' | translate }}</strong>
                        </div>
                        <div *ngIf="showExercisesInAssessment">
                            <jhi-course-management-exercise-row
                                *ngFor="let exercise of exercisesInAssessment"
                                [course]="course"
                                [rowType]="exerciseRowType.ASSESSING"
                                [details]="exercise"
                                [statistic]="statisticsPerExercise[exercise.exerciseId]"
                            ></jhi-course-management-exercise-row>
                        </div>
                        <div *ngIf="!showExercisesInAssessment" class="collapsed"></div>
                    </div>
                    <div *ngIf="pastExercises?.length > 0">
                        <div class="control-label" (click)="showPastExercises = !showPastExercises">
                            <fa-icon class="control-icon" [icon]="showPastExercises ? 'angle-down' : 'angle-up'"></fa-icon>
                            <strong>{{ 'artemisApp.course.pastExercises' | translate }}</strong>
                        </div>
                        <div *ngIf="showPastExercises">
                            <jhi-course-management-exercise-row
                                *ngFor="let exercise of pastExercises"
                                [course]="course"
                                [rowType]="exerciseRowType.PAST"
                                [details]="exercise"
                                [statistic]="statisticsPerExercise[exercise.exerciseId]"
                            ></jhi-course-management-exercise-row>
                        </div>
                        <div *ngIf="!showPastExercises" class="collapsed"></div>
                    </div>
                    <div *ngIf="futureExercises?.length + currentExercises?.length + exercisesInAssessment?.length + pastExercises?.length == 0">
                        <h4 class="text-center">{{ 'artemisApp.course.noExercises' | translate }}</h4>
                    </div>
                </div>
            </div>
            <div class="col-4 section-card statistics-card align-center">
                <div class="section-content align-center" *ngIf="courseStatistics?.activeStudents && course.numberOfStudents">
                    <jhi-course-management-statistics [courseId]="course.id" [initialStats]="courseStatistics.activeStudents" [amountOfStudentsInCourse]="course.numberOfStudents">
                    </jhi-course-management-statistics>
                </div>
            </div>
        </div>
    </div>

    <div class="card-footer">
        <a
            *ngIf="course.isAtLeastTutor"
            [routerLink]="['/course-management', course.id, 'exercises']"
            [class.guided-tour]="isGuidedTour"
            class="btn btn-info mr-1 mb-1"
            [ngbTooltip]="'entity.action.exercise' | translate"
        >
            <fa-icon [icon]="'list-alt'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'entity.action.exercise' | translate }}</span>
        </a>
        <a
            *ngIf="course.isAtLeastTutor"
            [routerLink]="['/course-management', course.id, 'scores']"
            class="btn btn-info mr-1 mb-1"
            [ngbTooltip]="'entity.action.scores' | translate"
        >
            <fa-icon [icon]="'table'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'entity.action.scores' | translate }}</span>
        </a>
        <a
            *ngIf="course.isAtLeastTutor"
            [routerLink]="['/course-management', course.id, 'lectures']"
            class="btn btn-info mr-1 mb-1"
            [ngbTooltip]="'entity.action.lecture' | translate"
        >
            <fa-icon [icon]="'file-pdf'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'entity.action.lecture' | translate }}</span>
        </a>
        <a *ngIf="course.isAtLeastTutor" [routerLink]="['/course-management', course.id, 'exams']" class="btn btn-info mr-1 mb-1" [ngbTooltip]="'entity.action.exams' | translate">
            <fa-icon [icon]="'graduation-cap'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'entity.action.exams' | translate }}</span>
        </a>
        <a
            *ngIf="course.isAtLeastTutor"
            [routerLink]="['/course-management', course.id, 'tutor-dashboard']"
            class="btn btn-info mr-1 mb-1"
            [ngbTooltip]="'entity.action.assessmentDashboard' | translate"
            [class.guided-tour]="isGuidedTour"
        >
            <fa-icon [icon]="'user-check'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'entity.action.assessmentDashboard' | translate }}</span>
        </a>
        <a
            *ngIf="course.isAtLeastInstructor"
            [routerLink]="['/course-management', course.id, 'instructor-dashboard']"
            class="btn btn-info mr-1 mb-1"
            [ngbTooltip]="'artemisApp.course.instructorDashboard' | translate"
        >
            <fa-icon [icon]="'chess-king'"></fa-icon>
            <span class="d-none d-md-inline">{{ 'artemisApp.course.instructorDashboard' | translate }}</span>
        </a>
        <a *ngIf="course.isAtLeastInstructor" [routerLink]="['/course-management', course.id, 'goal-management']" class="btn btn-primary mr-1 mb-1">
            <fa-icon [icon]="'flag'"></fa-icon>
            <span [innerHTML]="'artemisApp.learningGoal.learningGoalButton' | translate" class="d-none d-md-inline"></span>
        </a>
    </div>
</div>
